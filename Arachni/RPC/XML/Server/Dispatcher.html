<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Arachni::RPC::XML::Server::Dispatcher</title>
<link rel="stylesheet" href="../../../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../../../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../../../_index.html">Index (D)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../../../Arachni.html" title="Arachni (module)">Arachni</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../../RPC.html" title="Arachni::RPC (module)">RPC</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../XML.html" title="Arachni::RPC::XML (module)">XML</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Server.html" title="Arachni::RPC::XML::Server (module)">Server</a></span></span>
     &raquo; 
    <span class="title">Dispatcher</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Arachni::RPC::XML::Server::Dispatcher
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Base.html" title="Arachni::RPC::XML::Server::Base (class)">Base</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next"><span class='object_link'><a href="Base.html" title="Arachni::RPC::XML::Server::Base (class)">Base</a></span></li>
          
            <li class="next">Arachni::RPC::XML::Server::Dispatcher</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="../../../Module/Utilities.html" title="Arachni::Module::Utilities (module)">Module::Utilities</a></span>, <span class='object_link'><a href="../../../UI/Output.html" title="Arachni::UI::Output (module)">UI::Output</a></span>, Sys</dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/rpc/xml/server/dispatcher.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Dispatcher class
</p>
<p>
Dispatches XML-RPC servers on demand providing a centralised environment
for multiple XMLRPC clients and allows for extensive process monitoring.
</p>
<p>
The process goes something like this:
</p>
<pre class="code">
  * a client issues a 'dispatch' call
  * the dispatcher starts a new XMLRPC server on a random port
  * the dispatcher returns the port of the XMLRPC server to the client
  * the client connects to the XMLRPC server listening on that port and does his business
</pre>
<p>
Once the client finishes using the XMLRPC server it <b>must</b> shut it
down.<br/> If it doesn&#8217;t the system will be eaten away by idle
instances of XMLRPC servers.
</p>
<p>
@author: Tasos &#8220;Zapotek&#8221; Laskos
</p>
<pre class="code">
                                     &lt;tasos.laskos@gmail.com&gt;
                                     &lt;zapotek@segfault.gr&gt;
</pre>
<p>
@version: 0.1.2
</p>


  </div>
</div>
<div class="tags">
  
</div>

  
  
  
  
  
  
  
  
  
  
  
  
  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#alive%3F-instance_method" title="#alive? (instance method)">- (Object) <strong>alive?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#banner-instance_method" title="#banner (instance method)">- (Object) <strong>banner</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Outputs the Arachni banner.<br/> Displays version number, revision number,
author details etc.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dispatch-instance_method" title="#dispatch (instance method)">- (Hash) <strong>dispatch</strong>(owner = 'unknown') </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Dispatches an XMLRPC server instance from the pool.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Dispatcher) <strong>initialize</strong>(opts) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of Dispatcher.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#job-instance_method" title="#job (instance method)">- (Hash) <strong>job</strong>(pid) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns proc info for a given pid.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#jobs-instance_method" title="#jobs (instance method)">- (Array&lt;Hash&gt;) <strong>jobs</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns proc info for all jobs.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_help-instance_method" title="#print_help (instance method)">- (Object) <strong>print_help</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">- (Object) <strong>run</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Starts the dispatcher&#8217;s server.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shutdown-instance_method" title="#shutdown (instance method)">- (Object) <strong>shutdown</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stats-instance_method" title="#stats (instance method)">- (Hash) <strong>stats</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns server stats regarding the jobs and pool.
</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../../UI/Output.html" title="Arachni::UI::Output (module)">UI::Output</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../../UI/Output.html#buffer-instance_method" title="Arachni::UI::Output#buffer (method)">#buffer</a></span>, <span class='object_link'><a href="../../../UI/Output.html#debug%21-instance_method" title="Arachni::UI::Output#debug! (method)">#debug!</a></span>, <span class='object_link'><a href="../../../UI/Output.html#debug%3F-instance_method" title="Arachni::UI::Output#debug? (method)">#debug?</a></span>, <span class='object_link'><a href="../../../UI/Output.html#flush_buffer-instance_method" title="Arachni::UI::Output#flush_buffer (method)">#flush_buffer</a></span>, <span class='object_link'><a href="../../../UI/Output.html#mute%21-instance_method" title="Arachni::UI::Output#mute! (method)">#mute!</a></span>, <span class='object_link'><a href="../../../UI/Output.html#muted%3F-instance_method" title="Arachni::UI::Output#muted? (method)">#muted?</a></span>, <span class='object_link'><a href="../../../UI/Output.html#only_positives%21-instance_method" title="Arachni::UI::Output#only_positives! (method)">#only_positives!</a></span>, <span class='object_link'><a href="../../../UI/Output.html#only_positives%3F-instance_method" title="Arachni::UI::Output#only_positives? (method)">#only_positives?</a></span>, <span class='object_link'><a href="../../../UI/Output.html#print_debug-instance_method" title="Arachni::UI::Output#print_debug (method)">#print_debug</a></span>, <span class='object_link'><a href="../../../UI/Output.html#print_debug_backtrace-instance_method" title="Arachni::UI::Output#print_debug_backtrace (method)">#print_debug_backtrace</a></span>, <span class='object_link'><a href="../../../UI/Output.html#print_debug_pp-instance_method" title="Arachni::UI::Output#print_debug_pp (method)">#print_debug_pp</a></span>, <span class='object_link'><a href="../../../UI/Output.html#print_error-instance_method" title="Arachni::UI::Output#print_error (method)">#print_error</a></span>, <span class='object_link'><a href="../../../UI/Output.html#print_error_backtrace-instance_method" title="Arachni::UI::Output#print_error_backtrace (method)">#print_error_backtrace</a></span>, <span class='object_link'><a href="../../../UI/Output.html#print_info-instance_method" title="Arachni::UI::Output#print_info (method)">#print_info</a></span>, <span class='object_link'><a href="../../../UI/Output.html#print_line-instance_method" title="Arachni::UI::Output#print_line (method)">#print_line</a></span>, <span class='object_link'><a href="../../../UI/Output.html#print_ok-instance_method" title="Arachni::UI::Output#print_ok (method)">#print_ok</a></span>, <span class='object_link'><a href="../../../UI/Output.html#print_status-instance_method" title="Arachni::UI::Output#print_status (method)">#print_status</a></span>, <span class='object_link'><a href="../../../UI/Output.html#print_verbose-instance_method" title="Arachni::UI::Output#print_verbose (method)">#print_verbose</a></span>, <span class='object_link'><a href="../../../UI/Output.html#reroute_to_file-instance_method" title="Arachni::UI::Output#reroute_to_file (method)">#reroute_to_file</a></span>, <span class='object_link'><a href="../../../UI/Output.html#reroute_to_file%3F-instance_method" title="Arachni::UI::Output#reroute_to_file? (method)">#reroute_to_file?</a></span>, <span class='object_link'><a href="../../../UI/Output.html#unmute%21-instance_method" title="Arachni::UI::Output#unmute! (method)">#unmute!</a></span>, <span class='object_link'><a href="../../../UI/Output.html#verbose%21-instance_method" title="Arachni::UI::Output#verbose! (method)">#verbose!</a></span>, <span class='object_link'><a href="../../../UI/Output.html#verbose%3F-instance_method" title="Arachni::UI::Output#verbose? (method)">#verbose?</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../../Module/Utilities.html" title="Arachni::Module::Utilities (module)">Module::Utilities</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../../Module/Utilities.html#exception_jail-instance_method" title="Arachni::Module::Utilities#exception_jail (method)">#exception_jail</a></span>, <span class='object_link'><a href="../../../Module/Utilities.html#get_path-instance_method" title="Arachni::Module::Utilities#get_path (method)">#get_path</a></span>, <span class='object_link'><a href="../../../Module/Utilities.html#normalize_url-instance_method" title="Arachni::Module::Utilities#normalize_url (method)">#normalize_url</a></span>, <span class='object_link'><a href="../../../Module/Utilities.html#read_file-instance_method" title="Arachni::Module::Utilities#read_file (method)">#read_file</a></span>, <span class='object_link'><a href="../../../Module/Utilities.html#seed-instance_method" title="Arachni::Module::Utilities#seed (method)">#seed</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="Base.html" title="Arachni::RPC::XML::Server::Base (class)">Base</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Base.html#add_handler-instance_method" title="Arachni::RPC::XML::Server::Base#add_handler (method)">#add_handler</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Arachni::RPC::XML::Server::Dispatcher (class)">Dispatcher</a></span></tt>) <strong>initialize</strong>(opts) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of Dispatcher
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rpc/xml/server/dispatcher.rb', line 53</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span> <span class='id opts'>opts</span> <span class='rparen'>)</span>

    <span class='id banner'>banner</span>

    <span class='ivar'>@opts</span> <span class='op'>=</span> <span class='id opts'>opts</span>
    <span class='ivar'>@opts</span><span class='period'>.</span><span class='id rpc_port'>rpc_port</span>  <span class='op'>||=</span> <span class='int'>7331</span>
    <span class='ivar'>@opts</span><span class='period'>.</span><span class='id pool_size'>pool_size</span> <span class='op'>||=</span> <span class='int'>5</span>

    <span class='kw'>if</span> <span class='id opts'>opts</span><span class='period'>.</span><span class='id help'>help</span>
        <span class='id print_help'>print_help</span>
        <span class='id exit'>exit</span> <span class='int'>0</span>
    <span class='kw'>end</span>

    <span class='kw'>super</span><span class='lparen'>(</span> <span class='ivar'>@opts</span> <span class='rparen'>)</span>

    <span class='id prep_logging'>prep_logging</span>

    <span class='id print_status'>print_status</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Initing XMLRPC Server...</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span>

    <span class='id add_handler'>add_handler</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dispatcher</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>self</span> <span class='rparen'>)</span>

    <span class='comment'># trap interupts and exit cleanly when required
</span>    <span class='id trap'>trap</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>HUP</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id shutdown'>shutdown</span> <span class='rbrace'>}</span>
    <span class='id trap'>trap</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>INT</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id shutdown'>shutdown</span> <span class='rbrace'>}</span>

    <span class='ivar'>@jobs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='ivar'>@pool</span> <span class='op'>=</span> <span class='const'>Queue</span><span class='period'>.</span><span class='id new'>new</span>

    <span class='id print_status'>print_status</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Warming up the pool...</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span>
    <span class='id prep_pool'>prep_pool</span>
    <span class='id print_status'>print_status</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Done.</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span>

    <span class='id print_status'>print_status</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Initialization complete.</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="alive?-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>alive?</strong> 
  

  
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="banner-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>banner</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Outputs the Arachni banner.<br/> Displays version number, revision number,
author details etc.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


185
186
187
188
189
190
191
192
193
194
195
196
197</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rpc/xml/server/dispatcher.rb', line 185</span>

<span class='kw'>def</span> <span class='id banner'>banner</span>

    <span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Arachni - Web Application Security Scanner Framework
   Author: Tasos &quot;Zapotek&quot; Laskos &lt;tasos.laskos@gmail.com&gt;
                                  &lt;zapotek@segfault.gr&gt;
           (With the support of the community and the Arachni Team.)

   Website:       http://github.com/Zapotek/arachni
</span><span class='tstring_content'>   Documentation: http://github.com/Zapotek/arachni/wiki</span><span class='tstring_end'>'</span></span>
    <span class='id puts'>puts</span>
    <span class='id puts'>puts</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="dispatch-instance_method">
  
    - (<tt>Hash</tt>) <strong>dispatch</strong>(owner = 'unknown') 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Dispatches an XMLRPC server instance from the pool
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
        <span class='name'>owner</span>
      
      
        <em class="default">(defaults to: <tt>'unknown'</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
an owner assign to the dispatched XMLRPC server
</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
includes port number, owner, clock info and proc info
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rpc/xml/server/dispatcher.rb', line 108</span>

<span class='kw'>def</span> <span class='id dispatch'>dispatch</span><span class='lparen'>(</span> <span class='id owner'>owner</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>unknown</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span>

    <span class='comment'># just to make sure...
</span>    <span class='id owner'>owner</span> <span class='op'>=</span> <span class='id owner'>owner</span><span class='period'>.</span><span class='id to_s'>to_s</span>
    <span class='id cjob'>cjob</span>  <span class='op'>=</span> <span class='ivar'>@pool</span><span class='period'>.</span><span class='id pop'>pop</span>
    <span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>owner</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>     <span class='op'>=</span> <span class='id owner'>owner</span>
    <span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>starttime</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span>

    <span class='id print_status'>print_status</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Server dispatched -- PID: </span><span class='embexpr_beg'>#{</span><span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>pid</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'> - </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Port: </span><span class='embexpr_beg'>#{</span><span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>port</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'> - Owner: </span><span class='embexpr_beg'>#{</span><span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>owner</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span>

    <span class='id prep_pool'>prep_pool</span>

    <span class='ivar'>@jobs</span> <span class='op'>&lt;&lt;</span> <span class='id cjob'>cjob</span>

    <span class='kw'>return</span> <span class='id job'>job</span><span class='lparen'>(</span> <span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>pid</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="job-instance_method">
  
    - (<tt>Hash</tt>) <strong>job</strong>(pid) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns proc info for a given pid
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Fixnum</tt>)</span>
      
      
        <span class='name'>pid</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135
136
137
138
139
140
141
142
143
144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rpc/xml/server/dispatcher.rb', line 133</span>

<span class='kw'>def</span> <span class='id job'>job</span><span class='lparen'>(</span> <span class='id pid'>pid</span> <span class='rparen'>)</span>
    <span class='ivar'>@jobs</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span>
        <span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span>
        <span class='id cjob'>cjob</span> <span class='op'>=</span> <span class='id i'>i</span><span class='period'>.</span><span class='id dup'>dup</span>
        <span class='kw'>if</span> <span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>pid</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id pid'>pid</span>
            <span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>currtime</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span>
            <span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>age</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>currtime</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>birthdate</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
            <span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>runtime</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>  <span class='op'>=</span> <span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>currtime</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>starttime</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
            <span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>proc</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span>  <span class='id proc'>proc</span><span class='lparen'>(</span> <span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>pid</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='rparen'>)</span>

            <span class='kw'>return</span> <span class='id remove_nils'>remove_nils</span><span class='lparen'>(</span> <span class='id cjob'>cjob</span> <span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="jobs-instance_method">
  
    - (<tt>Array&lt;Hash&gt;</tt>) <strong>jobs</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns proc info for all jobs
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Array&lt;Hash&gt;</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


153
154
155
156
157
158
159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rpc/xml/server/dispatcher.rb', line 153</span>

<span class='kw'>def</span> <span class='id jobs'>jobs</span>
    <span class='id jobs'>jobs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='ivar'>@jobs</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span>
        <span class='op'>|</span><span class='id cjob'>cjob</span><span class='op'>|</span>
        <span class='id proc_info'>proc_info</span> <span class='op'>=</span> <span class='id job'>job</span><span class='lparen'>(</span> <span class='id cjob'>cjob</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>pid</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='rparen'>)</span>
        <span class='id jobs'>jobs</span> <span class='op'>&lt;&lt;</span> <span class='id proc_info'>proc_info</span> <span class='kw'>if</span> <span class='id proc_info'>proc_info</span>
    <span class='rbrace'>}</span>
    <span class='kw'>return</span> <span class='id jobs'>jobs</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="print_help-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>print_help</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rpc/xml/server/dispatcher.rb', line 199</span>

<span class='kw'>def</span> <span class='id print_help'>print_help</span>
    <span class='id puts'>puts</span> <span class='heredoc_beg'>&lt;&lt;USAGE</span><span class='tstring_content'>  Usage:  arachni_xmlrpcd \[options\]

  Supported options:

-h
--help                      output this

--port                      specify port to listen to
</span><span class='tstring_content'>                                (Default: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@opts</span><span class='period'>.</span><span class='id rpc_port'>rpc_port</span><span class='rbrace'>}</span><span class='tstring_content'>)

--reroute-to-logfile        reroute all output to a logfile under 'logs/'

--pool-size                 how many server workers/processes should be available
</span><span class='tstring_content'>                              at any given moment (Default: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@opts</span><span class='period'>.</span><span class='id pool_size'>pool_size</span><span class='rbrace'>}</span>
<span class='tstring_content'>)

--debug


SSL --------------------------

(All SSL options will be honored by the dispatched XMLRPC instances as well.)
(Do *not* use encrypted keys!)

--ssl-pkey   &lt;file&gt;         location of the SSL private key (.pem)
                                (Used to verify the server to the clients.)

--ssl-cert   &lt;file&gt;         location of the SSL certificate (.pem)
                                (Used to verify the server to the clients.)

--ssl-ca     &lt;file&gt;         location of the CA certificate (.pem)
                                (Used to verify the clients to the server.)
</span><span class='heredoc_end'>USAGE
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="run-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>run</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Starts the dispatcher&#8217;s server
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rpc/xml/server/dispatcher.rb', line 90</span>

<span class='kw'>def</span> <span class='id run'>run</span>
    <span class='id print_status'>print_status</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Starting the server...</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span>
    <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="shutdown-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>shutdown</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


95
96
97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rpc/xml/server/dispatcher.rb', line 95</span>

<span class='kw'>def</span> <span class='id shutdown'>shutdown</span>
    <span class='id print_status'>print_status</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Shutting down...</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span>
    <span class='kw'>super</span>
    <span class='id print_status'>print_status</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Done.</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stats-instance_method">
  
    - (<tt>Hash</tt>) <strong>stats</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns server stats regarding the jobs and pool
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170
171
172
173
174
175
176
177
178
179</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rpc/xml/server/dispatcher.rb', line 168</span>

<span class='kw'>def</span> <span class='id stats'>stats</span>
    <span class='id cjobs'>cjobs</span>    <span class='op'>=</span> <span class='id jobs'>jobs</span><span class='lparen'>(</span> <span class='rparen'>)</span>
    <span class='id running'>running</span>  <span class='op'>=</span> <span class='id cjobs'>cjobs</span><span class='period'>.</span><span class='id reject'>reject</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id job'>job</span><span class='op'>|</span> <span class='id job'>job</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>proc</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='rbrace'>}</span>
    <span class='id finished'>finished</span> <span class='op'>=</span> <span class='id cjobs'>cjobs</span> <span class='op'>-</span> <span class='id running'>running</span>

    <span class='kw'>return</span> <span class='lbrace'>{</span>
        <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>running_jobs</span><span class='tstring_end'>'</span></span>    <span class='op'>=&gt;</span> <span class='id running'>running</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>finished_jobs</span><span class='tstring_end'>'</span></span>   <span class='op'>=&gt;</span> <span class='id finished'>finished</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>init_pool_size</span><span class='tstring_end'>'</span></span>  <span class='op'>=&gt;</span> <span class='ivar'>@opts</span><span class='period'>.</span><span class='id pool_size'>pool_size</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>curr_pool_size</span><span class='tstring_end'>'</span></span>  <span class='op'>=&gt;</span> <span class='ivar'>@pool</span><span class='period'>.</span><span class='id size'>size</span>
    <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sun May 22 20:18:17 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.5 (ruby-1.9.2).
</div>

  </body>
</html>